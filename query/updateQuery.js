"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.updateQuery=updateQuery;const utils_1=require("./utils");function updateQuery({table:e="",joins:t=[],updateData:r={},where:n="",nullValues:i=[],defaultValues:s=[],limit:o,sort:a,fromSubQuery:u={},setCalculations:l={}}){if(!e)throw new Error("⚠️ The `table` parameter is required.");if(!n)throw new Error("⚠️ The `where` parameter is required.");let $=Object.entries(r)?.map((([e,t])=>{if("object"==typeof t&&t?.hasOwnProperty("case")){return`${e} = CASE ${t.case.map((e=>{const{when:t,then:r}=e;return`WHEN ${t} THEN ${JSON.stringify(r)}`})).join(" ")} ELSE ${JSON.stringify(t?.default)} END`}const r="number"==typeof t||"boolean"==typeof t,n=t,i=r?n:n?.trim();return`${e} = ${r?i:JSON.stringify(i)}`})).join(",");if(Object.keys(l).length){const e=Object.entries(l).map((([e,t])=>`${e} = ${t}`)).join(", ");$+=$?`, ${e}`:e}if(Object.keys(u).length){const e=Object.entries(u).map((([e,t])=>`${e} = ${t}`)).join(", ");$+=$?`, ${e}`:e}if(i?.length){const e=i.map((e=>`${e} = NULL`)).join(", ");$+=$?`, ${e}`:e}if(s?.length){const e=s.map((e=>`${e} = DEFAULT`)).join(", ");$+=$?`, ${e}`:e}let p=`UPDATE${(0,utils_1.parseJoins)(t)} ${e} SET ${$}`;return n&&(p+=` WHERE ${n}`),a&&(p+=(0,utils_1.parseSort)(a)),o&&(p+=` LIMIT ${o}`),p}